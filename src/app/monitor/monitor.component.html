<section>
  <div class="instance-section">
    <h2>MONITOR</h2>
    <table id="{{title}}Table" class="table">
      <thead>
        <tr>
          <th scope="col">Context</th>
          <th scope="col">Owner</th>
          <th scope="col">Region</th>
          <th *ngIf="isAnyClusterMarked()" scope="col">Destruction Date</th>
          <th scope="col">Destroy</th>
          <th scope="col">Cancel</th>
          <th scope="col">Monitor Option</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let cluster of clusters">
          <td>{{ cluster.context }}</td>
          <td>{{ cluster.startedBy }}</td>
          <td>{{ cluster.region }}</td>
          <td *ngIf="isAnyClusterMarked()">
            <span>{{ cluster.destructionDate | amDateFormat: 'M/D h:mm A' }}</span>
          </td>
          <td *ngIf="!cluster.destroyed && cluster.marked">
            <span matTooltip="Destroy Now" *ngIf="cluster.marked" class="option-button" (click)="destroy(cluster)">
              <i class="fas fa-bomb fa-lg"></i>
            </span>
          </td>
          <td *ngIf="!cluster.destroyed && cluster.marked">
            <span matTooltip="Cancel Destruction" *ngIf="cluster.marked" class="option-button" (click)="unmark(cluster)">
              <i class="fas fa-ban fa-lg"></i>
            </span>
          </td>
          <td *ngIf="!cluster.destroyed && !cluster.marked && cluster.marked !== null" colspan="2">
            <span *ngIf="cluster.marked !== null && !cluster.marked">Not yet marked for destruction</span>
          </td>
          <td *ngIf="!cluster.destroyed && cluster.marked === null" colspan="2">
              <span *ngIf="cluster.marked === null">Not being monitored</span>
            </td>
          <td *ngIf="!cluster.destroyed">
            <span matTooltip="Monitor" *ngIf="cluster.monitored !== null && !cluster.monitored" class="option-button" (click)="optIn(cluster)">
              <i class="fas fa-eye fa-lg"></i>
            </span>
            <span matTooltip="Don't Monitor" *ngIf="cluster.monitored" class="option-button" (click)="optOut(cluster)">
              <i class="fas fa-eye-slash fa-lg"></i>
            </span>
            <span *ngIf="cluster.monitored === null">Janitor not running</span>
          </td>
          <td *ngIf="cluster.destroyed" colspan="3">
            Cluster has been destroyed
          </td>
        </tr>
      </tbody>
    </table>
    <span *ngIf="!clusters[0]">There are no Clusters running.</span>
  </div>
</section>
